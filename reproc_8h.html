<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>reproc: C:/Users/daan/projects/reproc/include/c/reproc/reproc.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">reproc
   &#160;<span id="projectnumber">v1.0.0-beta.1</span>
   </div>
   <div id="projectbrief">Cross-platform library that simplifies working with external CLI applications from C and C++</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_f0bbaeb96b1b216779501c980a5af6c6.html">c</a></li><li class="navelem"><a class="el" href="dir_41a6e7b983b211d242d2dc464eea283e.html">reproc</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">reproc.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="error_8h_source.html">error.h</a>&quot;</code><br />
<code>#include &quot;export.h&quot;</code><br />
</div>
<p><a href="reproc_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structreproc__type.html">reproc_type</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a1b46dd8d00465f26a664d825e0069d65"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="reproc_8h.html#a1b46dd8d00465f26a664d825e0069d65">REPROC_STREAM</a> { <a class="el" href="reproc_8h.html#a1b46dd8d00465f26a664d825e0069d65a619c6f637f2d4124a7aa903e78bd829d">REPROC_IN</a>, 
<a class="el" href="reproc_8h.html#a1b46dd8d00465f26a664d825e0069d65a792a5700d0381201e29b49df59508de8">REPROC_OUT</a>, 
<a class="el" href="reproc_8h.html#a1b46dd8d00465f26a664d825e0069d65af528cda09944f047cf83379756f1b4c5">REPROC_ERR</a>
 }</td></tr>
<tr class="separator:a1b46dd8d00465f26a664d825e0069d65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad85b12c1b2b5675ff9e863ccb49e336c"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="reproc_8h.html#ad85b12c1b2b5675ff9e863ccb49e336c">REPROC_CLEANUP</a> { <a class="el" href="reproc_8h.html#ad85b12c1b2b5675ff9e863ccb49e336ca78566ff8a1ae2758d2fea0f94b44f43f">REPROC_WAIT</a> = 1 &lt;&lt; 0, 
<a class="el" href="reproc_8h.html#ad85b12c1b2b5675ff9e863ccb49e336ca7f02026d64dcd9b0f1af33b1fddaf2fb">REPROC_TERMINATE</a> = 1 &lt;&lt; 1, 
<a class="el" href="reproc_8h.html#ad85b12c1b2b5675ff9e863ccb49e336ca12979aa7ff3873d42d5e6948876ff1ff">REPROC_KILL</a> = 1 &lt;&lt; 2
 }</td></tr>
<tr class="separator:ad85b12c1b2b5675ff9e863ccb49e336c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a29cb1ef637c10f7a6210bd3c4de2fc26"><td class="memItemLeft" align="right" valign="top"><a class="el" href="error_8h.html#addc725a3ec3a5494bdb97270a6ea0cc2">REPROC_ERROR</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="reproc_8h.html#a29cb1ef637c10f7a6210bd3c4de2fc26">reproc_start</a> (<a class="el" href="structreproc__type.html">reproc_type</a> *process, int argc, const char *const *argv, const char *working_directory)</td></tr>
<tr class="separator:a29cb1ef637c10f7a6210bd3c4de2fc26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27f994dc86f3a07484cf569e7502d4d3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="error_8h.html#addc725a3ec3a5494bdb97270a6ea0cc2">REPROC_ERROR</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="reproc_8h.html#a27f994dc86f3a07484cf569e7502d4d3">reproc_write</a> (<a class="el" href="structreproc__type.html">reproc_type</a> *process, const void *buffer, unsigned int to_write, unsigned int *bytes_written)</td></tr>
<tr class="separator:a27f994dc86f3a07484cf569e7502d4d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14f0e1957449afc6331457f5ff1b4967"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="reproc_8h.html#a14f0e1957449afc6331457f5ff1b4967">reproc_close</a> (<a class="el" href="structreproc__type.html">reproc_type</a> *process, <a class="el" href="reproc_8h.html#a1b46dd8d00465f26a664d825e0069d65">REPROC_STREAM</a> stream)</td></tr>
<tr class="separator:a14f0e1957449afc6331457f5ff1b4967"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb6ffa9dbc27c14ae5e6c4b9b3d9ec0d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="error_8h.html#addc725a3ec3a5494bdb97270a6ea0cc2">REPROC_ERROR</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="reproc_8h.html#afb6ffa9dbc27c14ae5e6c4b9b3d9ec0d">reproc_read</a> (<a class="el" href="structreproc__type.html">reproc_type</a> *process, <a class="el" href="reproc_8h.html#a1b46dd8d00465f26a664d825e0069d65">REPROC_STREAM</a> stream, void *buffer, unsigned int size, unsigned int *bytes_read)</td></tr>
<tr class="separator:afb6ffa9dbc27c14ae5e6c4b9b3d9ec0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c60248455f71038e9006092fbfe08de"><td class="memItemLeft" align="right" valign="top"><a class="el" href="error_8h.html#addc725a3ec3a5494bdb97270a6ea0cc2">REPROC_ERROR</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="reproc_8h.html#a1c60248455f71038e9006092fbfe08de">reproc_stop</a> (<a class="el" href="structreproc__type.html">reproc_type</a> *process, int cleanup_flags, unsigned int timeout, unsigned int *exit_status)</td></tr>
<tr class="separator:a1c60248455f71038e9006092fbfe08de"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a1f4d689ab652bea8457646d88c097823"><td class="memItemLeft" align="right" valign="top">const unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="reproc_8h.html#a1f4d689ab652bea8457646d88c097823">REPROC_INFINITE</a></td></tr>
<tr class="separator:a1f4d689ab652bea8457646d88c097823"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a1b46dd8d00465f26a664d825e0069d65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b46dd8d00465f26a664d825e0069d65">&#9670;&nbsp;</a></span>REPROC_STREAM</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="reproc_8h.html#a1b46dd8d00465f26a664d825e0069d65">REPROC_STREAM</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Stream identifiers used to indicate which stream to close or read from.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="reproc_8h.html#afb6ffa9dbc27c14ae5e6c4b9b3d9ec0d">reproc_read</a> </dd>
<dd>
<a class="el" href="reproc_8h.html#a14f0e1957449afc6331457f5ff1b4967">reproc_close</a> </dd></dl>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a1b46dd8d00465f26a664d825e0069d65a619c6f637f2d4124a7aa903e78bd829d"></a>REPROC_IN&#160;</td><td class="fielddoc"><p>stdin </p>
</td></tr>
<tr><td class="fieldname"><a id="a1b46dd8d00465f26a664d825e0069d65a792a5700d0381201e29b49df59508de8"></a>REPROC_OUT&#160;</td><td class="fielddoc"><p>stdout </p>
</td></tr>
<tr><td class="fieldname"><a id="a1b46dd8d00465f26a664d825e0069d65af528cda09944f047cf83379756f1b4c5"></a>REPROC_ERR&#160;</td><td class="fielddoc"><p>stderr </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="reproc_8h_source.html#l00045">45</a> of file <a class="el" href="reproc_8h_source.html">reproc.h</a>.</p>

</div>
</div>
<a id="ad85b12c1b2b5675ff9e863ccb49e336c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad85b12c1b2b5675ff9e863ccb49e336c">&#9670;&nbsp;</a></span>REPROC_CLEANUP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="reproc_8h.html#ad85b12c1b2b5675ff9e863ccb49e336c">REPROC_CLEANUP</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Contains flags used to tell reproc how to stop a child process.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="reproc_8h.html#a1c60248455f71038e9006092fbfe08de">reproc_stop</a> </dd></dl>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ad85b12c1b2b5675ff9e863ccb49e336ca78566ff8a1ae2758d2fea0f94b44f43f"></a>REPROC_WAIT&#160;</td><td class="fielddoc"><p>Wait for the child process to exit on its own </p>
</td></tr>
<tr><td class="fieldname"><a id="ad85b12c1b2b5675ff9e863ccb49e336ca7f02026d64dcd9b0f1af33b1fddaf2fb"></a>REPROC_TERMINATE&#160;</td><td class="fielddoc"><p>Send <code>SIGTERM</code> (POSIX) or <code>CTRL-BREAK</code> (Windows) and wait for the child process to exit </p>
</td></tr>
<tr><td class="fieldname"><a id="ad85b12c1b2b5675ff9e863ccb49e336ca12979aa7ff3873d42d5e6948876ff1ff"></a>REPROC_KILL&#160;</td><td class="fielddoc"><p>Send <code>SIGKILL</code> (POSIX) or call <code>TerminateProcess</code> (Windows) and wait for the child process to exit. Because <code>SIGKILL</code> and <code>TerminateProcess</code> do not allow the child process to clean up its resources this flag should only be used if the <a class="el" href="reproc_8h.html#ad85b12c1b2b5675ff9e863ccb49e336ca7f02026d64dcd9b0f1af33b1fddaf2fb">REPROC_TERMINATE</a> flag is not sufficient to stop a child process. </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="reproc_8h_source.html#l00059">59</a> of file <a class="el" href="reproc_8h_source.html">reproc.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a29cb1ef637c10f7a6210bd3c4de2fc26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29cb1ef637c10f7a6210bd3c4de2fc26">&#9670;&nbsp;</a></span>reproc_start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="error_8h.html#addc725a3ec3a5494bdb97270a6ea0cc2">REPROC_ERROR</a> reproc_start </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structreproc__type.html">reproc_type</a> *&#160;</td>
          <td class="paramname"><em>process</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const *&#160;</td>
          <td class="paramname"><em>argv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>working_directory</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Starts the process specified by <code>argv</code> in the given working directory and redirects its standard output streams.</p>
<p>If this function does not return an error the child process actually starts executing and can be inspected using the operating system's tools for process inspection (e.g. ps on Linux).</p>
<p>Every successful call to this function should be followed by a call to <a class="el" href="reproc_8h.html#a1c60248455f71038e9006092fbfe08de">reproc_stop</a>. If an error occurs all allocated resources are cleaned up before the function returns.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">process</td><td>Cannot be <code>NULL</code>.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">argv</td><td><p class="starttd">An array of UTF-8 encoded, null terminated strings specifying the program to execute along with its arguments. Must at least contain one element. Cannot be <code>NULL</code>.</p>
<ul>
<li>The first element in the array indicates the executable to run. This can be an absolute path, a path relative to the working directory (also passed as argument) or the name of an executable located in the PATH. Cannot be <code>NULL</code>.</li>
<li>The following elements indicate the whitespace delimited arguments passed to the executable. None of these elements can be <code>NULL</code>.</li>
<li>The final element must be <code>NULL</code>.</li>
</ul>
<p class="endtd">Example: ["cmake", "-G", "Ninja", "-DCMAKE_BUILD_TYPE=Release", <code>NULL</code>] </p>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">argc</td><td><p class="starttd">Specifies the amount of elements in <code>argv</code>. Should NOT include the <code>NULL</code> value at the end of the array. Must be bigger than or equal to 1.</p>
<p class="endtd">Example: if argv is ["cmake", "--help", <code>NULL</code>] then <code>argc</code> is 2. </p>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">working_directory</td><td>Indicates the working directory for the child process. If it is <code>NULL</code>, the child process runs in the same directory as the current process.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><p class="startdd"><a class="el" href="error_8h.html#addc725a3ec3a5494bdb97270a6ea0cc2">REPROC_ERROR</a></p>
<p class="enddd">Possible errors:</p><ul>
<li><a class="el" href="error_8h.html#addc725a3ec3a5494bdb97270a6ea0cc2a5a702410aaef3e905d747ce09673075f">REPROC_PIPE_LIMIT_REACHED</a></li>
<li><a class="el" href="error_8h.html#addc725a3ec3a5494bdb97270a6ea0cc2a3563861c0786cb9577f8d3f2f7b4c74c">REPROC_PROCESS_LIMIT_REACHED</a></li>
<li><a class="el" href="error_8h.html#addc725a3ec3a5494bdb97270a6ea0cc2a4b980d4d07bb7c8f88f4d4235608a085">REPROC_NOT_ENOUGH_MEMORY</a></li>
<li><a class="el" href="error_8h.html#addc725a3ec3a5494bdb97270a6ea0cc2a2225bc2ef5cd05955057d4d05712e02c">REPROC_INVALID_UNICODE</a></li>
<li><a class="el" href="error_8h.html#addc725a3ec3a5494bdb97270a6ea0cc2a4b02874f5195349b2894f5c978017762">REPROC_PERMISSION_DENIED</a></li>
<li><a class="el" href="error_8h.html#addc725a3ec3a5494bdb97270a6ea0cc2a412ed26a2f8e3dda75ecd4640027e0d7">REPROC_SYMLINK_LOOP</a></li>
<li><a class="el" href="error_8h.html#addc725a3ec3a5494bdb97270a6ea0cc2aecd5183b50a4cf25a44f68a76e54a472">REPROC_FILE_NOT_FOUND</a> </li>
</ul>
</dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="git-status_8c-example.html#a2">git-status.c</a>.</dd>
</dl>
</div>
</div>
<a id="a27f994dc86f3a07484cf569e7502d4d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27f994dc86f3a07484cf569e7502d4d3">&#9670;&nbsp;</a></span>reproc_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="error_8h.html#addc725a3ec3a5494bdb97270a6ea0cc2">REPROC_ERROR</a> reproc_write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structreproc__type.html">reproc_type</a> *&#160;</td>
          <td class="paramname"><em>process</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>to_write</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&#160;</td>
          <td class="paramname"><em>bytes_written</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Writes up to <code>to_write</code> bytes from <code>buffer</code> to the standard input (stdin) of the child process and stores the amount of bytes written in <code>bytes_written</code>.</p>
<p>For pipes, the <code>write</code> system call on both Windows and POSIX platforms will block until the requested amount of bytes have been written to the pipe so this function should only rarely succeed without writing the full amount of bytes requested.</p>
<p>(POSIX) Writing to a closed stdin pipe by default terminates the parent process with the <code>SIGPIPE</code> signal. <a class="el" href="reproc_8h.html#a27f994dc86f3a07484cf569e7502d4d3">reproc_write</a> will only return <a class="el" href="error_8h.html#addc725a3ec3a5494bdb97270a6ea0cc2abb0b4eeb86493523782279acebd664c1">REPROC_STREAM_CLOSED</a> if this signal is ignored by the parent process.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">process</td><td>Cannot be <code>NULL</code>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buffer</td><td>Pointer to memory block from which bytes should be written. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">to_write</td><td>Maximum amount of bytes to write. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">bytes_written</td><td>Amount of bytes written. Set to zero if an error occurs. Cannot be <code>NULL</code>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><p class="startdd"><a class="el" href="error_8h.html#addc725a3ec3a5494bdb97270a6ea0cc2">REPROC_ERROR</a></p>
<p class="enddd">Possible errors:</p><ul>
<li><a class="el" href="error_8h.html#addc725a3ec3a5494bdb97270a6ea0cc2abb0b4eeb86493523782279acebd664c1">REPROC_STREAM_CLOSED</a></li>
<li><a class="el" href="error_8h.html#addc725a3ec3a5494bdb97270a6ea0cc2ad0f4dd91dac0e388e657a8e81029b7c7">REPROC_INTERRUPTED</a></li>
<li><a class="el" href="error_8h.html#addc725a3ec3a5494bdb97270a6ea0cc2afe59155cb8bf508237ac0a711e2b423b">REPROC_PARTIAL_WRITE</a> </li>
</ul>
</dd></dl>

</div>
</div>
<a id="a14f0e1957449afc6331457f5ff1b4967"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14f0e1957449afc6331457f5ff1b4967">&#9670;&nbsp;</a></span>reproc_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void reproc_close </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structreproc__type.html">reproc_type</a> *&#160;</td>
          <td class="paramname"><em>process</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="reproc_8h.html#a1b46dd8d00465f26a664d825e0069d65">REPROC_STREAM</a>&#160;</td>
          <td class="paramname"><em>stream</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Closes the stream endpoint of the parent process indicated by <code>stream</code>.</p>
<p>This function is necessary when a child process reads from stdin until it is closed. After writing all the input to the child process with <a class="el" href="reproc_8h.html#a27f994dc86f3a07484cf569e7502d4d3">reproc_write</a> the standard input stream can be closed using this function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">process</td><td>Cannot be NULL. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">stream</td><td>The stream to close.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><p class="startdd"><a class="el" href="error_8h.html#addc725a3ec3a5494bdb97270a6ea0cc2">REPROC_ERROR</a></p>
<p class="enddd">Possible errors: / </p>
</dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="git-status_8c-example.html#a5">git-status.c</a>.</dd>
</dl>
</div>
</div>
<a id="afb6ffa9dbc27c14ae5e6c4b9b3d9ec0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb6ffa9dbc27c14ae5e6c4b9b3d9ec0d">&#9670;&nbsp;</a></span>reproc_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="error_8h.html#addc725a3ec3a5494bdb97270a6ea0cc2">REPROC_ERROR</a> reproc_read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structreproc__type.html">reproc_type</a> *&#160;</td>
          <td class="paramname"><em>process</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="reproc_8h.html#a1b46dd8d00465f26a664d825e0069d65">REPROC_STREAM</a>&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&#160;</td>
          <td class="paramname"><em>bytes_read</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reads up to <code>size</code> bytes from the child process' standard output and stores them in <code>buffer</code>. <code>bytes_read</code> is used to store the amount of bytes read.</p>
<p>Assuming no other errors occur this function returns <a class="el" href="error_8h.html#addc725a3ec3a5494bdb97270a6ea0cc2a5ef4e6c3d3e7305f18778ba9df0a6846">REPROC_SUCCESS</a> until the child process closes its standard output stream (happens automatically when the child process exits) and all bytes have been read from the given stream. This allows the function to be used in the following way to read all data from a child process stdout stream (uses C++ <a class="elRef" doxygen="C:/Users/daan/projects/reproc/build/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w/" href="http://en.cppreference.com/w/cpp/string/basic_string.html">std::string</a> for brevity):</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define BUFFER_SIZE 1024</span></div><div class="line"></div><div class="line">...</div><div class="line"></div><div class="line">char buffer[BUFFER_SIZE];</div><div class="line"><a class="codeRef" doxygen="C:/Users/daan/projects/reproc/build/cppreference-doxygen-web.tag.xml:http://en.cppreference.com/w/" href="http://en.cppreference.com/w/cpp/string/basic_string.html">std::string</a> output{};</div><div class="line"></div><div class="line"><span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div><div class="line">  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> bytes_read = 0;</div><div class="line">  error = <a class="code" href="reproc_8h.html#afb6ffa9dbc27c14ae5e6c4b9b3d9ec0d">reproc_read</a>(process, <a class="code" href="reproc_8h.html#a1b46dd8d00465f26a664d825e0069d65a792a5700d0381201e29b49df59508de8">REPROC_OUT</a>, buffer, BUFFER_SIZE, &amp;bytes_read);</div><div class="line">  <span class="keywordflow">if</span> (error) { <span class="keywordflow">break</span>; }</div><div class="line"></div><div class="line">  output.append(buffer, bytes_read);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordflow">if</span> (error != <a class="code" href="error_8h.html#addc725a3ec3a5494bdb97270a6ea0cc2abb0b4eeb86493523782279acebd664c1">REPROC_STREAM_CLOSED</a>) { <span class="keywordflow">return</span> error; }</div><div class="line"></div><div class="line"><span class="comment">// Do something with output</span></div></div><!-- fragment --><p>Remember that this function reads bytes and not strings. It is up to the user to add a null terminator if he wants to use <code>buffer</code> as a null terminated string after this function completes. However, this is easily accomplished as long as we make sure to leave space for the null terminator in the buffer when reading:</p>
<div class="fragment"><div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> bytes_read = 0;</div><div class="line">error = <a class="code" href="reproc_8h.html#afb6ffa9dbc27c14ae5e6c4b9b3d9ec0d">reproc_read</a>(process, <a class="code" href="reproc_8h.html#a1b46dd8d00465f26a664d825e0069d65a792a5700d0381201e29b49df59508de8">REPROC_OUT</a>, buffer, BUFFER_SIZE - 1, &amp;bytes_read);</div><div class="line"><span class="comment">//                                               ^^^^^^^^^^^^^^^</span></div><div class="line"><span class="keywordflow">if</span> (error) { <span class="keywordflow">return</span> error; }</div><div class="line"></div><div class="line">buffer[bytes_read] = <span class="charliteral">&#39;\0&#39;</span>; <span class="comment">// Add null terminator</span></div></div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">process</td><td>Cannot be <code>NULL</code>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">stream</td><td>Stream to read from. Cannot be <a class="el" href="reproc_8h.html#a1b46dd8d00465f26a664d825e0069d65a619c6f637f2d4124a7aa903e78bd829d">REPROC_IN</a>. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">buffer</td><td>Buffer used to store bytes read from the given stream. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>Size of <code>buffer</code>. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">bytes_read</td><td>Amount of bytes read from the given stream. Set to zero if an error occurs. Cannot be <code>NULL</code>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><p class="startdd"><a class="el" href="error_8h.html#addc725a3ec3a5494bdb97270a6ea0cc2">REPROC_ERROR</a></p>
<p class="enddd">Possible errors:</p><ul>
<li><a class="el" href="error_8h.html#addc725a3ec3a5494bdb97270a6ea0cc2abb0b4eeb86493523782279acebd664c1">REPROC_STREAM_CLOSED</a></li>
<li><a class="el" href="error_8h.html#addc725a3ec3a5494bdb97270a6ea0cc2ad0f4dd91dac0e388e657a8e81029b7c7">REPROC_INTERRUPTED</a> </li>
</ul>
</dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="git-status_8c-example.html#a8">git-status.c</a>.</dd>
</dl>
</div>
</div>
<a id="a1c60248455f71038e9006092fbfe08de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c60248455f71038e9006092fbfe08de">&#9670;&nbsp;</a></span>reproc_stop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="error_8h.html#addc725a3ec3a5494bdb97270a6ea0cc2">REPROC_ERROR</a> reproc_stop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structreproc__type.html">reproc_type</a> *&#160;</td>
          <td class="paramname"><em>process</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cleanup_flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&#160;</td>
          <td class="paramname"><em>exit_status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Tries to stop the child process according to the flags specified by <code>cleanup_flags</code> and cleans up all associated resources.</p>
<p>Regardless whether the child process is succesfully stopped or not this function releases all resources associated with the child process. Because of this, it can only be called once for each child process. Always make sure the combination of <code>cleanup_flags</code> and <code>timeout</code> is enough to stop the child process completely.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">process</td><td>Cannot be <code>NULL</code>.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cleanup_flags</td><td>Indicate which actions should be performed to stop the process. This parameter takes a combination of flags from the <a class="el" href="reproc_8h.html#ad85b12c1b2b5675ff9e863ccb49e336c">REPROC_CLEANUP</a> enum. Flags can be combined with a bitwise OR.</td></tr>
  </table>
  </dd>
</dl>
<p>Example: if <code>cleanup_flags</code> is <a class="el" href="reproc_8h.html#ad85b12c1b2b5675ff9e863ccb49e336ca78566ff8a1ae2758d2fea0f94b44f43f">REPROC_WAIT</a> | <a class="el" href="reproc_8h.html#ad85b12c1b2b5675ff9e863ccb49e336ca7f02026d64dcd9b0f1af33b1fddaf2fb">REPROC_TERMINATE</a> the function will first wait for <code>timeout</code> milliseconds for the child process to exit on its own. If the child process hasn't exited after waiting, the function will then send <code>SIGTERM</code> (POSIX) or <code>CTRL-BREAK</code> (Windows) to the child process and wait <code>timeout</code> milliseconds again for the child process to exit. If the child process is still running after waiting the <a class="el" href="error_8h.html#addc725a3ec3a5494bdb97270a6ea0cc2aab4bcb51cd5025aaaaa2f6b95779a2ba">REPROC_WAIT_TIMEOUT</a> error is returned.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout</td><td><p class="starttd">Amount of milliseconds to wait after each step in stopping the process.</p>
<p>If it is 0 the function will only check if the process is still running without waiting after each step.</p>
<p class="endtd">If it is <a class="el" href="reproc_8h.html#a1f4d689ab652bea8457646d88c097823">REPROC_INFINITE</a> the function will wait indefinitely after each step for the child process to exit (this implies only one step will ever run even if multiple steps are specified since the function will wait indefinitely after the first step). </p>
</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">exit_status</td><td><p class="starttd">Optional output parameter used to store the exit status of the child process.</p>
<p>If the child process exits normally the exit status of the child process is stored in <code>exit_status</code>.</p>
<p>Exiting normally is defined as follows for the different platforms:</p><ul>
<li>POSIX: The process returned from its main function or called <code>exit</code> or <code>_exit</code></li>
<li>Windows: The process returned from its <code>main</code> or <code>WinMain</code> function</li>
</ul>
<p class="endtd">If the function does not exit normally the following values are stored in <code>exit_status:</code> </p><ul>
<li>POSIX: Number of the signal that terminated the child process</li>
<li>Windows: exit status passed to <code>ExitProcess</code> or <code>TerminateProcess</code> function call that terminated the child process </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><p class="startdd"><a class="el" href="error_8h.html#addc725a3ec3a5494bdb97270a6ea0cc2">REPROC_ERROR</a></p>
<p>Possible errors when <code>timeout</code> is <a class="el" href="reproc_8h.html#a1f4d689ab652bea8457646d88c097823">REPROC_INFINITE</a>:</p><ul>
<li><a class="el" href="error_8h.html#addc725a3ec3a5494bdb97270a6ea0cc2ad0f4dd91dac0e388e657a8e81029b7c7">REPROC_INTERRUPTED</a></li>
</ul>
<p>Possible errors when <code>timeout</code> is 0:</p><ul>
<li><a class="el" href="error_8h.html#addc725a3ec3a5494bdb97270a6ea0cc2aab4bcb51cd5025aaaaa2f6b95779a2ba">REPROC_WAIT_TIMEOUT</a></li>
</ul>
<p class="enddd">Possible errors when <code>timeout</code> is not 0 or <a class="el" href="reproc_8h.html#a1f4d689ab652bea8457646d88c097823">REPROC_INFINITE</a>:</p><ul>
<li><a class="el" href="error_8h.html#addc725a3ec3a5494bdb97270a6ea0cc2ad0f4dd91dac0e388e657a8e81029b7c7">REPROC_INTERRUPTED</a></li>
<li><a class="el" href="error_8h.html#addc725a3ec3a5494bdb97270a6ea0cc2aab4bcb51cd5025aaaaa2f6b95779a2ba">REPROC_WAIT_TIMEOUT</a></li>
<li><a class="el" href="error_8h.html#addc725a3ec3a5494bdb97270a6ea0cc2a3563861c0786cb9577f8d3f2f7b4c74c">REPROC_PROCESS_LIMIT_REACHED</a></li>
<li><a class="el" href="error_8h.html#addc725a3ec3a5494bdb97270a6ea0cc2a4b980d4d07bb7c8f88f4d4235608a085">REPROC_NOT_ENOUGH_MEMORY</a> </li>
</ul>
</dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="git-status_8c-example.html#a11">git-status.c</a>.</dd>
</dl>
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a1f4d689ab652bea8457646d88c097823"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f4d689ab652bea8457646d88c097823">&#9670;&nbsp;</a></span>REPROC_INFINITE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const unsigned int REPROC_INFINITE</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Tells a function that takes a timeout value to wait indefinitely. </p>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="git-status_8c-example.html#a13">git-status.c</a>.</dd>
</dl>
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
